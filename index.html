<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>영어단어 플래시카드</title>
  <style>
    :root {
      --gap: 16px;
      --radius: 14px;
      --flip-ms: 320ms;
    }

    * {
      box-sizing: border-box;
      border-radius: 10px;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, sans-serif;
      background: #0c0f14;
      color: #e8ecf1;
    }

    .size-toggle {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 50;
      background: rgb(42 44 49);
      color: #d9d9d9;
      border: 1px solid rgba(255, 255, 255, .12);
      border-radius: 12px;
      padding: 10px;
      cursor: pointer;
      backdrop-filter: blur(4px);
    }

    .size-toggle svg {
      width: 22px;
      height: 22px;
      display: block;
    }

    .size-toggle[aria-pressed="true"] .icon-small {
      display: none;
    }

    .size-toggle[aria-pressed="true"] .icon-large {
      display: block;
    }

    .size-toggle[aria-pressed="false"] .icon-small {
      display: block;
    }

    .size-toggle[aria-pressed="false"] .icon-large {
      display: none;
    }

    header {
      /* padding: 56px 16px 8px; */
      text-align: left;
    }

    header h1 {
      padding: 6px 22px;
      font-weight: 500;
      font-size: 21px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(min(80vw, 1080px), 1fr));
      gap: var(--gap);
      padding: 16px;
      max-width: 1200px;
      margin: 0 auto 40px;
    }

    body.compact .grid {
      grid-template-columns: repeat(auto-fill, minmax(min(42vw, 150px), 1fr));
    }

    .card {
      perspective: 1200px;
      -webkit-perspective: 1200px;
    }

    .card-inner {
      width: 100%;
      aspect-ratio: 800/1175;
      position: relative;
      transform-style: preserve-3d;
      -webkit-transform-style: preserve-3d;
      transition: transform var(--flip-ms) ease-in-out;
    }

    .card-inner.is-flipped {
      transform: rotateY(180deg);
    }

    .card-inner.is-flipped .face.front {
      transform: rotateY(0deg) translateZ(0.1px);
      z-index: 2;
    }

    .card-inner.is-flipped .face.back {
      transform: rotateY(180deg) translateZ(0.1px);
      z-index: 1;
    }

    .face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }

    .face.front {
      transform: rotateY(0deg);
      z-index: 2;
    }

    .face.back {
      transform: rotateY(180deg);
      z-index: 1;
    }

    .face img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .badge {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(0, 0, 0, .55);
      color: #fff;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, .15);
      z-index: 3;
    }
  </style>
</head>

<body>


  <header>
    <h1>IPA American English Flashcards</h1>
    <button id="sizeBtn" class="size-toggle" aria-label="카드 크기 전환" aria-pressed="false" title="크게/작게">
      <svg class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="3" y="3" width="7" height="7" rx="1.5" />
        <rect x="14" y="3" width="7" height="7" rx="1.5" />
        <rect x="3" y="14" width="7" height="7" rx="1.5" />
        <rect x="14" y="14" width="7" height="7" rx="1.5" />
      </svg>
      <svg class="icon-large" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="2" y="5" width="20" height="14" rx="2" />
      </svg>
    </button>
  </header>

  <main class="grid" id="grid" aria-live="polite"></main>

  <script>
    const PAIR_COUNT = 36;
    const savedCompact = localStorage.getItem('flashcard_compact') === '1';
    if (savedCompact) document.body.classList.add('compact');
    const grid = document.getElementById('grid');
    const sizeBtn = document.getElementById('sizeBtn');
    sizeBtn.setAttribute('aria-pressed', savedCompact ? 'true' : 'false');

    const CARDS = Array.from({ length: PAIR_COUNT }, (_, i) => {
      const frontIndex = 2 * i + 1;
      const backIndex = 2 * i + 2;
      return { front: `./assets/card/card-${frontIndex}.png`, back: `./assets/card/card-${backIndex}.png`, idx: i + 1 };
    });

    function cardTemplate(item) {
      return `
      <article class="card" tabindex="0">
        <div class="card-inner">
          <div class="face front">
            <img src="${item.front}" alt="card ${item.idx} 앞면" loading="lazy" />
          </div>
          <div class="face back">
            <img src="${item.back}" alt="card ${item.idx} 뒷면" loading="lazy" />
          </div>
        </div>
      </article>`;
    }

    function attachFlipHandlers(el) {
      const inner = el.querySelector('.card-inner');
      const toggle = () => inner.classList.toggle('is-flipped');
      el.addEventListener('click', toggle);
      el.addEventListener('keydown', (e) => {
        if (e.code === 'Space' || e.code === 'Enter') { e.preventDefault(); toggle(); }
      });
    }

    function render() {
      grid.innerHTML = CARDS.map(cardTemplate).join('');
      grid.querySelectorAll('.card').forEach(attachFlipHandlers);
    }

    sizeBtn.addEventListener('click', () => {
      const isCompact = document.body.classList.toggle('compact');
      sizeBtn.setAttribute('aria-pressed', isCompact ? 'true' : 'false');
      localStorage.setItem('flashcard_compact', isCompact ? '1' : '0');
    });

    render();
  </script>
</body>

</html>